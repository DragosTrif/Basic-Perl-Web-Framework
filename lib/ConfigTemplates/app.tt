use strict;
use warnings;

use Plack::Builder;
use Plack::Request;

use lib 'Controller';
use [% controller_path %];


builder {
[% FOREACH m IN methods %]
  [% m.body %]
[% END %]
};


sub load_params {
  my $request = shift;

  my %params;

  foreach  my $param (sort $request->param()) {
    $params{$param} = $request->param($param);
  }

  return \%params;
}